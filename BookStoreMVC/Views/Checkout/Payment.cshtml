@* @{ *@
@*     ViewData["Title"] = "Payment"; *@
@*     Layout = "_Layout"; *@
@* } *@
@* *@
@* <section id="payment"> *@
@* *@
@*     <!-- Flex Container --> *@
@*     <div class="container grid grid-cols-2 grid-rows-6  min-h-[700px]  max-w-7xl  mx-auto  mt-10 gap-10  "> *@
@* *@
@*         $1$ Address #1# *@
@*         <div class="bg-white rounded-lg shadow-lg row-span-2 p-7"> *@
@*             <form id="payment-form"> *@
@*                 <div id="payment-element"> *@
@*                     <!--Stripe.js injects the Payment Element--> *@
@*                 </div> *@
@*                 <button id="submit" class="bgButton w-full py-2"> *@
@*                     <div class="spinner hidden" id="spinner"></div> *@
@*                     <span id="button-text">Pay now</span> *@
@*                 </button> *@
@*                 <div id="payment-message" class="hidden"></div> *@
@*             </form> *@
@*         </div> *@
@*         $1$ End Address #1# *@
@* *@
@*         $1$ Cart #1# *@
@*         <div class=" rounded-lg shadow-lg  row-span-4 p-7  gap-y-2 grid grid-cols-1 grid-rows-6"> *@
@* *@
@*             $1$ Cart items #1# *@
@*             <div class="flex flex-col gap-y-4 rounded-lg   row-span-4  overflow-y-scroll max-h-96 "> *@
@* *@
@*                 $1$ Item #1# *@
@*                 <div class="h-24 flex gap-x-2 "> *@
@*                     <div class="w-1/3  rounded-lg"> *@
@*                         <img src="~/img/BoldDime.png" class="w-36 h-24  object-cover rounded-lg" alt=""> *@
@*                     </div> *@
@*                     <div class="w-1/3 flex flex-col justify-center  "> *@
@*                         <h1 class="font-bold">Brave New World</h1> *@
@*                         <h1 class="font-light text-sm">Harley T.H.</h1> *@
@*                         <h1 class="text-primary font-bold">$30.0</h1> *@
@*                     </div> *@
@*                     <div class="w-1/3 text-lg text-primary text-center self-center font-bold     ">x2</div> *@
@*                 </div> *@
@*                 $1$ Item #1# *@
@* *@
@*                 $1$ Item #1# *@
@*                 <div class="h-24 flex gap-x-2 "> *@
@*                     <div class="w-1/3  rounded-lg"> *@
@*                         <img src="~/img/BoldDime.png" class="w-36 h-24  object-cover rounded-lg" alt=""> *@
@*                     </div> *@
@*                     <div class="w-1/3 flex flex-col justify-center  "> *@
@*                         <h1 class="font-bold">Brave New World</h1> *@
@*                         <h1 class="font-light text-sm">Harley T.H.</h1> *@
@*                         <h1 class="text-primary font-bold">$30.0</h1> *@
@*                     </div> *@
@*                     <div class="w-1/3 text-lg text-primary text-center self-center font-bold     ">x2</div> *@
@*                 </div> *@
@*                 $1$ Item #1# *@
@* *@
@*                 $1$ Item #1# *@
@*                 <div class="h-24 flex gap-x-2 "> *@
@*                     <div class="w-1/3  rounded-lg"> *@
@*                         <img src="~/img/BoldDime.png" class="w-36 h-24  object-cover rounded-lg" alt=""> *@
@*                     </div> *@
@*                     <div class="w-1/3 flex flex-col justify-center  "> *@
@*                         <h1 class="font-bold">Brave New World</h1> *@
@*                         <h1 class="font-light text-sm">Harley T.H.</h1> *@
@*                         <h1 class="text-primary font-bold">$30.0</h1> *@
@*                     </div> *@
@*                     <div class="w-1/3 text-lg text-primary text-center self-center font-bold     ">x2</div> *@
@*                 </div> *@
@*                 $1$ Item #1# *@
@* *@
@*                 $1$ Item #1# *@
@*                 <div class="h-24 flex gap-x-2 "> *@
@*                     <div class="w-1/3  rounded-lg"> *@
@*                         <img src="~/img/BoldDime.png" class="w-36 h-24  object-cover rounded-lg" alt=""> *@
@*                     </div> *@
@*                     <div class="w-1/3 flex flex-col justify-center  "> *@
@*                         <h1 class="font-bold">Brave New World</h1> *@
@*                         <h1 class="font-light text-sm">Harley T.H.</h1> *@
@*                         <h1 class="text-primary font-bold">$30.0</h1> *@
@*                     </div> *@
@*                     <div class="w-1/3 text-lg text-primary text-center self-center font-bold     ">x2</div> *@
@*                 </div> *@
@*                 $1$ Item #1# *@
@*                 $1$ Item #1# *@
@*                 <div class="h-24 flex gap-x-2 "> *@
@*                     <div class="w-1/3  rounded-lg"> *@
@*                         <img src="~/img/BoldDime.png" class="w-36 h-24  object-cover rounded-lg" alt=""> *@
@*                     </div> *@
@*                     <div class="w-1/3 flex flex-col justify-center  "> *@
@*                         <h1 class="font-bold">Brave New World</h1> *@
@*                         <h1 class="font-light text-sm">Harley T.H.</h1> *@
@*                         <h1 class="text-primary font-bold">$30.0</h1> *@
@*                     </div> *@
@*                     <div class="w-1/3 text-lg text-primary text-center self-center font-bold     ">x2</div> *@
@*                 </div> *@
@*                 $1$ Item #1# *@
@*             </div> *@
@*             $1$ Cart items #1# *@
@* *@
@*             $1$ Subtotal #1# *@
@*             <div class=" border border-x-0 border-b-0 border-t-2 flex flex-col justify-around"> *@
@*                 <div class="flex justify-between"> *@
@*                     <h1 class="text-gray-400">Shiping</h1> *@
@*                     <h1 class="font-bold text-primary">$5.0</h1> *@
@* *@
@*                 </div> *@
@*                 <div class="flex justify-between"> *@
@*                     <h1 class="text-gray-400">Subtotal</h1> *@
@*                     <h1 class="font-bold text-primary"> $30.0</h1> *@
@* *@
@*                 </div> *@
@*             </div> *@
@*             $1$ Subtotal #1# *@
@* *@
@*             $1$ Total #1# *@
@*             <div class=" border border-x-0 border-b-0 border-t-2"> *@
@*                 <div class="flex justify-between"> *@
@*                     <h1 class="text-titleText font-bold text-lg">Total</h1> *@
@*                     <h1 class="font-bold text-lg text-primary "> $300.0</h1> *@
@* *@
@*                 </div> *@
@*                 <button onclick="location.href='@Url.Action("Pay", "Checkout", new {})'" class="bgButton w-full py-2">Place Order</button> *@
@*             </div> *@
@*             $1$ Total #1# *@
@*         </div> *@
@*         $1$ Cart #1# *@
@* *@
@*         $1$ Payment methods #1# *@
@*         <div class="bg-white rounded-lg shadow-lg row-span-2 p-7   overflow-hidden flex flex-col gap-2"> *@
@*             <h1 class="text-xl font-bold">Payment Methods</h1> *@
@*             <div class="text-xl font-bold w-full h-full grid grid-cols-2 gap-4 "> *@
@*                 <div class="rounded-lg border-2 "></div> *@
@*                 <div class="rounded-lg border-2 "></div> *@
@*                 <div class="rounded-lg border-2 "></div> *@
@*             </div> *@
@*         </div> *@
@*         $1$ Payment methods #1# *@
@*     </div> *@
@* *@
@* </section> *@
@* *@
@* *@
@* @section Scripts { *@
@*     <script asp-append-version="true" src="~/js/stripe.js"></script> *@
@* } *@
@model IList<BookStoreMVC.Models.Cart.ShoppingCartItem>
@{

    ViewData["Title"] = "Check Out";
    Layout = "_Layout";
    decimal subtotal = Model.Sum(item => item.Price);
}

<section id="checkout">

    <!-- Flex Container -->
    <div class="container grid grid-cols-2 grid-rows-6 h-[60rem]  max-w-7xl  mx-auto  mt-20 gap-10  ">

        @* Payment methods *@
        <div class="bg-white rounded-lg shadow-lg row-span-3 p-7 overflow-hidden flex flex-col gap-2">
            <h1 class="text-xl font-bold">Payment Methods</h1>
            <ul class=" gap-6 grid grid-cols-2 grid-rows-2  w-full ">
                <li
                    class=" px-5 py-2 flex items-center border-2 rounded-lg  border-gray-200 cursor-pointer  peer-checked:border-blue-600 peer-checked:text-blue-600 hover:text-gray-600 hover:bg-gray-100 ">
                    <input checked type="radio" id="hosting-small" name="hosting" value="hosting-small" class=" peer "
                        required>
                    <label for="hosting-small" class="p-5 flex justify-center w-full items-center  text-gray-500  ">
                        <img src="~/img/logo/Mastercard_.svg" class="h-20" alt="momo.svg">
                    </label>
                </li>
                <li
                    class="flex px-5 py-2 items-center   row-span-1 bg-white rounded-lg border-2 border-gray-200 cursor-pointer  peer-checked:border-primary peer-checked:text-primary hover:text-gray-600 hover:bg-gray-100">
                    <input type="radio" id="hosting-big" name="hosting" value="hosting-big" class="peer" required>
                    <label for="hosting-big" class=" p-5 flex justify-center w-full items-center  text-gray-500  ">
                        <img src="~/img/logo/LogoMoMo.svg" class="h-20" alt="momo.svg">
                    </label>
                </li>

            </ul>

        </div>
        @* Payment methods *@

        @* Cart *@
        <div class=" rounded-lg shadow-lg  row-span-4 p-7  gap-y-2 grid grid-cols-1 grid-rows-6 bg-white">

            @* Cart items *@
            <div
                class="flex flex-col gap-y-4 rounded-lg   row-span-4  overflow-y-scroll max-h-96  scrollbar-thin scrollbar-thumb-primary scrollbar-track-transparent ">

                @foreach (var item in Model)
                {
                    <div class="h-24 flex gap-x-2 ">
                        <div class="w-1/3  rounded-lg">
                            <img src=@item.Product.Book.SignedUrl class="w-36 h-24  object-cover rounded-lg"
                            alt=@item.Product.Book.ImageName>
                        </div>
                        <div class="w-1/3 flex flex-col justify-center  ">
                            <h1 class="font-bold">@item.Product.Book.Title</h1>
                            <h1 class="font-light text-sm">@item.Product.Book.authorDisplay</h1>
                            <h1 class="text-primary font-bold">@item.Price.ToString("#,##")</h1>
                        </div>
                        <div class="w-1/3 text-lg text-primary text-center self-center font-bold">x @item.Amount</div>
                    </div>
                }


            </div>
            @* Cart items *@

            @* Subtotal *@
            <div class=" border border-x-0 border-b-0 border-t-2 flex flex-col justify-around">
                <div class="flex justify-between">
                    <h1 class="text-gray-400">Shiping</h1>
                    <h1 class="font-bold text-primary">15,000</h1>

                </div>
                <div class="flex justify-between">
                    <h1 class="text-gray-400">Subtotal</h1>
                    <h1 class="font-bold text-primary">@subtotal.ToString("#,##")</h1>

                </div>
            </div>
            @* Subtotal *@

            @* Total *@
            <div class=" border border-x-0 border-b-0 border-t-2">
                <div class="flex justify-between">
                    <h1 class="text-titleText font-bold text-lg">Total</h1>
                    <h1 class="font-bold text-lg text-primary "> @((subtotal + 15000).ToString("#,##"))</h1>

                </div>
                <button onclick="location.href='@Url.Action("Pay", "Checkout", new {})'" id="checkoutBtn" class="bgButton w-full py-2">Pay</button>
            </div>
            @* Total *@
        </div>
        @* Cart *@
    </div>

</section>


@* @section Scripts {
    <script asp-append-version="true" src="~/js/stripe.js"></script>
    } *@

@section Scripts {
<script type="text/javascript">

    $("#checkoutBtn").click(function () {
        var val = $("input[type='radio']:checked").val();
        alert(val);
        window.location.replace(
            `${base_url}/payments/failed?paymentIntent_id=${paymentIntent_id}`
        );
    });

</script>
}